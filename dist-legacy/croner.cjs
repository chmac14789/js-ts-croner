!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Cron=e():t.Cron=e()}(this,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>o});function r(t,e){if(this.timezone=e,t&&t instanceof Date)this.fromDate(t);else if(void 0===t)this.fromDate(new Date);else if(t&&"string"==typeof t)this.fromString(t);else{if(!(t instanceof r))throw new TypeError("CronDate: Invalid type ("+typeof t+") passed as parameter to CronDate constructor");this.fromCronDate(t)}}function n(t){this.pattern=t,this.seconds=Array(60).fill(0),this.minutes=Array(60).fill(0),this.hours=Array(24).fill(0),this.days=Array(31).fill(0),this.months=Array(12).fill(0),this.daysOfWeek=Array(8).fill(0),this.parse()}r.prototype.fromDate=function(t,e){if(this.timezone){let r=t.getTime(),n=function(t,e){return new Date(t.toLocaleString("en-US",{timeZone:e}))}(t,this.timezone);e||(t=n),this.UTCmsOffset=n.getTime()-r}else this.UTCmsOffset=0;this.milliseconds=t.getMilliseconds(),this.seconds=t.getSeconds(),this.minutes=t.getMinutes(),this.hours=t.getHours(),this.days=t.getDate(),this.months=t.getMonth(),this.years=t.getFullYear()},r.prototype.fromCronDate=function(t){this.UTCmsOffset=t.UTCmsOffset,this.timezone=t.timezone;let e=new Date(t.years,t.months,t.days,t.hours,t.minutes,t.seconds,t.milliseconds);this.milliseconds=e.getMilliseconds(),this.seconds=e.getSeconds(),this.minutes=e.getMinutes(),this.hours=e.getHours(),this.days=e.getDate(),this.months=e.getMonth(),this.years=e.getFullYear()},r.prototype.fromString=function(t){let e=this.parseISOLocal(t);if(isNaN(e))throw new TypeError("CronDate: Provided string value for CronDate could not be parsed as date.");this.fromDate(new Date(e),!0)},r.prototype.increment=function(t,e){e||(this.seconds+=1);let n=this.getTime();this.milliseconds=0;let i=this,s=function(t,e,r,n){for(let s=void 0===n?i[t]+r:0+r;s<e[t].length;s++)if(e[t][s])return i[t]=s-r,!0;return!1},o=function(){for(;p>=0;)s(a[p][0],t,a[p][2],0),p--},a=[["seconds","minutes",0],["minutes","hours",0],["hours","days",0],["days","months",-1],["months","years",0]],p=0;for(;p<5;)s(a[p][0],t,a[p][2])||(this[a[p][1]]++,o()),p++;for(;!t.daysOfWeek[this.getDate(!0).getDay()];)this.days+=1,p=2,o();return n!=i.getTime()?(i=new r(i),this.years>=4e3?null:i.increment(t,!0)):this},r.prototype.getDate=function(t){let e=t?0:this.UTCmsOffset;return new Date(this.years,this.months,this.days,this.hours,this.minutes,this.seconds,this.milliseconds-e)},r.prototype.getTime=function(t){let e=t?0:this.UTCmsOffset;return new Date(this.years,this.months,this.days,this.hours,this.minutes,this.seconds,this.milliseconds-e).getTime()},r.prototype.parseISOLocal=function(t){let e=t.split(/\D/);if(e.length<6)return NaN;let r=parseInt(e[0]),n=parseInt(e[1]),i=parseInt(e[2]),s=parseInt(e[3]),o=parseInt(e[4]),a=parseInt(e[5]);return isNaN(r)||isNaN(n)||isNaN(i)||isNaN(s)||isNaN(o)||isNaN(a)?NaN:new Date(r,n-1,i,s,o,a)},n.prototype.parse=function(){if("string"!=typeof this.pattern&&this.pattern.constructor!==String)throw new TypeError("CronPattern: Pattern has to be of type string.");let t=this.pattern.trim().replace(/\s+/g," ").split(" ");if(t.length<5||t.length>6)throw new TypeError("CronPattern: invalid configuration format ('"+this.pattern+"'), exacly five or six space separated parts required.");5===t.length&&t.unshift("0"),t[4]=this.replaceAlphaMonths(t[4]),t[5]=this.replaceAlphaDays(t[5]),this.throwAtIllegalCharacters(t),this.partToArray("seconds",t[0],0),this.partToArray("minutes",t[1],0),this.partToArray("hours",t[2],0),this.partToArray("days",t[3],-1),this.partToArray("months",t[4],-1),this.partToArray("daysOfWeek",t[5],0),this.daysOfWeek[7]&&(this.daysOfWeek[0]=1)},n.prototype.partToArray=function(t,e,r){let n,i,s=this[t];if("*"!==e)if(i=e.split(","),i.length>1)for(n=0;n<i.length;n++)this.partToArray(t,i[n],r);else-1!==e.indexOf("-")?this.handleRange(e,t,r):-1!==e.indexOf("/")?this.handleStepping(e,t,r):this.handleNumber(e,t,r);else for(n=0;n<s.length;n++)s[n]=1},n.prototype.throwAtIllegalCharacters=function(t){let e=/[^/*0-9,-]+/;for(let r=0;r<t.length;r++)if(e.test(t[r]))throw new TypeError("CronPattern: configuration entry "+r+" ("+t[r]+") contains illegal characters.")},n.prototype.handleNumber=function(t,e,r){let n=parseInt(t,10)+r;if(n<0||n>=this[e].length)throw new TypeError("CronPattern: "+e+" value out of range: '"+t+"'");this[e][n]=1},n.prototype.handleRange=function(t,e,r){let n=t.split("-");if(2!==n.length)throw new TypeError("CronPattern: Syntax error, illegal range: '"+t+"'");let i=parseInt(n[0],10)+r,s=parseInt(n[1],10)+r;if(isNaN(i))throw new TypeError("CronPattern: Syntax error, illegal lower range (NaN)");if(isNaN(s))throw new TypeError("CronPattern: Syntax error, illegal upper range (NaN)");if(i<0||s>=this[e].length)throw new TypeError("CronPattern: Value out of range: '"+t+"'");if(i>s)throw new TypeError("CronPattern: From value is larger than to value: '"+t+"'");for(let t=i;t<=s;t++)this[e][t+r]=1},n.prototype.handleStepping=function(t,e,r){let n=t.split("/");if(2!==n.length)throw new TypeError("CronPattern: Syntax error, illegal stepping: '"+t+"'");if("*"!==n[0])throw new TypeError("CronPattern: Syntax error, left part of / needs to be * : '"+t+"'");let i=parseInt(n[1],10);if(isNaN(i))throw new TypeError("CronPattern: Syntax error, illegal stepping: (NaN)");if(0===i)throw new TypeError("CronPattern: Syntax error, illegal stepping: 0");if(i>this[e].length)throw new TypeError("CronPattern: Syntax error, steps cannot be greater than maximum value of part ("+this[e].length+")");for(let t=0;t<this[e].length;t+=i)this[e][t+r]=1},n.prototype.replaceAlphaDays=function(t){return t.replace(/sun/gi,"0").replace(/mon/gi,"1").replace(/tue/gi,"2").replace(/wed/gi,"3").replace(/thu/gi,"4").replace(/fri/gi,"5").replace(/sat/gi,"6")},n.prototype.replaceAlphaMonths=function(t){return t.replace(/jan/gi,"1").replace(/feb/gi,"2").replace(/mar/gi,"3").replace(/apr/gi,"4").replace(/may/gi,"5").replace(/jun/gi,"6").replace(/jul/gi,"7").replace(/aug/gi,"8").replace(/sep/gi,"9").replace(/oct/gi,"10").replace(/nov/gi,"11").replace(/dec/gi,"12")};const i=Math.pow(2,31)-1;function s(t,e,r){return this instanceof s?(this.pattern=new n(t),"function"==typeof e&&(r=e,e=void 0),this.options=this.processOptions(e),void 0!==r&&this.schedule(r),this):new s(t,e,r)}s.prototype.processOptions=function(t){return void 0===t&&(t={}),t.paused=void 0!==t.paused&&t.paused,t.maxRuns=void 0===t.maxRuns?1/0:t.maxRuns,t.kill=!1,t.startAt&&(t.startAt=new r(t.startAt,t.timezone)),t.stopAt&&(t.stopAt=new r(t.stopAt,t.timezone)),t},s.prototype.next=function(t){t=new r(t,this.options.timezone);let e=this._next(t);return e?e.getDate():null},s.prototype.previous=function(){return this.previousrun?this.previousrun.getDate():null},s.prototype._next=function(t){this.options.startAt&&t&&t.getTime(!0)<this.options.startAt.getTime(!0)&&(t=new r(this.options.startAt,this.options.timezone));let e=new r(t,this.options.timezone).increment(this.pattern);return null===e||this.options.maxRuns<=0||this.options.kill||this.options.stopAt&&e.getTime(!0)>=this.options.stopAt.getTime(!0)?null:e},s.prototype.msToNext=function(t){t=new r(t,this.options.timezone);let e=this._next(t);return e?e.getTime(!0)-t.getTime(!0):null},s.prototype.stop=function(){this.options.kill=!0,this.currentTimeout&&clearTimeout(this.currentTimeout)},s.prototype.pause=function(){return(this.options.paused=!0)&&!this.options.kill},s.prototype.resume=function(){return!(this.options.paused=!1)&&!this.options.kill},s.prototype.schedule=function(t){let e=this,n=this.msToNext(e.previousrun),s=e.maxDelay||i;return n>s&&(n=s),null!==n&&(e.currentTimeout=setTimeout((function(){n!==s&&(e.options.paused||(e.options.maxRuns--,t()),e.previousrun=new r(void 0,e.options.timezone)),e.schedule(t)}),n)),this};const o=s;return e.default})()}));